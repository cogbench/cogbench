<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CogBench — Verifiable Cognitive Constraint Benchmark</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Space+Grotesk:wght@500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.7/dist/chart.umd.min.js"></script>
<style>
  /* ── Design Tokens ── */
  :root {
    --primary: #2563EB;
    --primary-hover: #1D4ED8;
    --primary-light: #DBEAFE;
    --dark: #0F172A;
    --dark-soft: #1E293B;
    --light: #F8FAFC;
    --light-alt: #F1F5F9;
    --text: #1E293B;
    --text-muted: #64748B;
    --text-on-dark: #F1F5F9;
    --text-muted-on-dark: #94A3B8;
    --border: #E2E8F0;
    --white: #FFFFFF;
    --local: #0072B2;
    --api: #D55E00;
    --accent: #009E73;
    --gold: #E69F00;
    --red: #DC2626;
    --green: #16A34A;
    --radius-sm: 6px;
    --radius-md: 12px;
    --shadow-card: 0 4px 20px rgba(0,0,0,0.08);
    --shadow-card-hover: 0 8px 30px rgba(0,0,0,0.12);
    --transition-fast: 0.2s ease;
    --transition-base: 0.3s ease;
  }

  /* ── Reset & Base ── */
  *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

  html {
    scroll-behavior: smooth;
    scroll-padding-top: 60px;
  }

  body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    font-size: 0.9rem;
    line-height: 1.5;
    color: var(--text);
    background-color: var(--white);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
  }

  body > main { flex: 1; }

  .container {
    max-width: 1100px;
    margin: 0 auto;
    padding: 0 1.5rem;
  }

  h1, h2, h3, h4, h5, h6 {
    font-family: 'Space Grotesk', sans-serif;
    font-weight: 700;
    line-height: 1.2;
    color: var(--dark);
  }

  h1 { font-size: clamp(1.5rem, 3vw, 2rem); }
  h2 { font-size: clamp(1.2rem, 2.5vw, 1.4rem); }
  h3 { font-size: clamp(1rem, 2vw, 1.15rem); }

  a {
    color: var(--primary);
    text-decoration: none;
    transition: color var(--transition-fast);
  }
  a:hover { color: var(--primary-hover); }

  img { max-width: 100%; height: auto; display: block; }

  /* ── Fade-in Animation ── */
  .fade-in {
    opacity: 0;
    transform: translateY(30px);
    transition: opacity 0.6s ease, transform 0.6s ease;
  }
  .fade-in.visible {
    opacity: 1;
    transform: translateY(0);
  }

  /* ── Navigation ── */
  .nav {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    height: 50px;
    background: rgba(255,255,255,0.85);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border-bottom: 1px solid rgba(226,232,240,0.5);
    z-index: 1000;
    transition: all var(--transition-base);
  }
  .nav.scrolled {
    height: 45px;
    box-shadow: 0 2px 20px rgba(0,0,0,0.06);
  }
  .nav__inner {
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 100%;
  }
  .nav__logo {
    font-family: 'Space Grotesk', sans-serif;
    font-size: 1.1rem;
    font-weight: 700;
    color: var(--dark);
    letter-spacing: -0.02em;
    text-decoration: none;
  }
  .nav__logo:hover { color: var(--primary); }
  .nav__logo span { color: var(--primary); }
  .nav__logo .v2 {
    font-size: 0.65rem;
    font-weight: 600;
    background: var(--primary);
    color: white;
    padding: 1px 5px;
    border-radius: 3px;
    margin-left: 4px;
    vertical-align: super;
  }

  .nav__links {
    display: flex;
    list-style: none;
    gap: 0.75rem;
    padding: 0;
  }
  .nav__links a {
    font-size: 0.85rem;
    font-weight: 500;
    color: var(--text-muted);
    transition: color var(--transition-fast);
    position: relative;
    text-decoration: none;
  }
  .nav__links a::after {
    content: '';
    position: absolute;
    bottom: -4px;
    left: 0;
    width: 0;
    height: 2px;
    background: var(--primary);
    transition: width var(--transition-base);
  }
  .nav__links a:hover { color: var(--dark); }
  .nav__links a:hover::after { width: 100%; }
  .nav__divider {
    width: 1px;
    height: 16px;
    background: var(--border);
    align-self: center;
  }
  .nav__links a i {
    font-size: 1rem;
  }
  .nav__links a i::after { display: none; }

  .nav__toggle {
    display: none;
    flex-direction: column;
    gap: 5px;
    background: none;
    border: none;
    cursor: pointer;
    padding: 4px;
  }
  .nav__toggle span {
    display: block;
    width: 24px;
    height: 2px;
    background: var(--dark);
    border-radius: 2px;
    transition: all var(--transition-base);
  }
  .nav__toggle.active span:nth-child(1) { transform: rotate(45deg) translate(5px, 5px); }
  .nav__toggle.active span:nth-child(2) { opacity: 0; }
  .nav__toggle.active span:nth-child(3) { transform: rotate(-45deg) translate(5px, -5px); }

  /* ── Hero ── */
  .hero {
    padding-top: 80px;
    padding-bottom: 1.5rem;
    border-bottom: 1px solid var(--border);
  }
  .hero__inner {
    text-align: center;
  }
  .hero__title {
    font-size: clamp(2rem, 5vw, 3rem);
    font-weight: 700;
    margin-bottom: 0.5rem;
    background: linear-gradient(135deg, var(--dark) 0%, var(--primary) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
  .hero__subtitle {
    font-size: 1rem;
    color: var(--text-muted);
    max-width: 680px;
    margin: 0 auto 1rem;
    line-height: 1.6;
  }
  .hero__stats {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 0.5rem;
  }
  .hero__stat {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 0.5rem 1rem;
    background: var(--light);
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
  }
  .hero__stat-num {
    font-family: 'Space Grotesk', sans-serif;
    font-size: 1.4rem;
    font-weight: 700;
    color: var(--primary);
    line-height: 1;
  }
  .hero__stat-label {
    font-size: 0.7rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--text-muted);
    margin-top: 0.15rem;
  }

  .hero__tagline {
    display: inline-block;
    margin-top: 0.75rem;
    padding: 0.35rem 0.75rem;
    background: linear-gradient(135deg, #FEF3C7, #FDE68A);
    border: 1px solid #F59E0B;
    border-radius: var(--radius-sm);
    font-size: 0.78rem;
    font-weight: 600;
    color: #92400E;
  }

  .hero__install {
    margin-top: 1rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.6rem;
  }
  .hero__install-code {
    display: inline-block;
    background: var(--dark);
    color: #E2E8F0;
    padding: 0.5rem 1.25rem;
    border-radius: var(--radius-sm);
    font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
    font-size: 0.9rem;
    font-weight: 500;
    letter-spacing: 0.02em;
    border: 1px solid rgba(255,255,255,0.1);
    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
  }
  .hero__badges {
    display: flex;
    gap: 0.5rem;
    align-items: center;
    flex-wrap: wrap;
    justify-content: center;
  }
  .hero__badge img {
    height: 20px;
    transition: transform var(--transition-fast);
  }
  .hero__badge:hover img {
    transform: scale(1.05);
  }

  /* ── Content Sections ── */
  .content-section {
    padding: 2rem 0;
    border-bottom: 1px solid var(--border);
  }
  .content-section__title {
    font-size: 1.4rem;
    margin-bottom: 0.25rem;
  }
  .content-section__subtitle {
    font-size: 0.85rem;
    color: var(--text-muted);
    margin-bottom: 1.25rem;
    max-width: 650px;
  }

  /* ── Table ── */
  .table-wrap {
    overflow-x: auto;
    border: 1px solid var(--border);
    border-radius: var(--radius-md);
    background: var(--white);
    box-shadow: var(--shadow-card);
  }
  table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.82rem;
  }
  th {
    background: var(--light-alt);
    font-weight: 600;
    text-transform: uppercase;
    font-size: 0.7rem;
    letter-spacing: 0.04em;
    color: var(--text-muted);
    padding: 0.6rem 0.75rem;
    text-align: left;
    cursor: pointer;
    user-select: none;
    white-space: nowrap;
    border-bottom: 2px solid var(--border);
    transition: background var(--transition-fast);
  }
  th:hover { background: var(--primary-light); }
  th .arrow { font-size: 0.55rem; margin-left: 2px; }

  td {
    padding: 0.55rem 0.75rem;
    border-bottom: 1px solid rgba(226,232,240,0.4);
    white-space: nowrap;
  }
  tbody tr:hover { background: rgba(37,99,235,0.03); }
  tbody tr:last-child td { border-bottom: none; }

  .rank-cell {
    font-weight: 700;
    font-size: 0.85rem;
    width: 36px;
    text-align: center;
  }
  .rank-1 { color: #D97706; }
  .rank-2 { color: #6B7280; }
  .rank-3 { color: #B45309; }

  .model-name {
    font-weight: 600;
    color: var(--dark);
  }

  .bar-cell {
    position: relative;
    min-width: 100px;
  }
  .bar-cell .bar {
    position: absolute;
    top: 50%;
    left: 0.75rem;
    transform: translateY(-50%);
    height: 16px;
    border-radius: 3px;
    opacity: 0.15;
  }
  .bar-cell .val {
    position: relative;
    font-weight: 600;
    font-variant-numeric: tabular-nums;
  }

  .type-tag {
    display: inline-block;
    font-size: 0.6rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.03em;
    padding: 1px 5px;
    border-radius: 3px;
    margin-left: 4px;
  }
  .type-tag--local { background: rgba(0,114,178,0.12); color: var(--local); }
  .type-tag--api { background: rgba(213,94,0,0.12); color: var(--api); }

  .gap-positive { color: var(--red); font-weight: 600; }
  .gap-negative { color: var(--green); font-weight: 600; }

  /* ── Method / Info Cards ── */
  .method-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 0.75rem;
  }
  .method-card {
    background: var(--white);
    border: 1px solid var(--border);
    border-radius: var(--radius-md);
    padding: 1rem;
    box-shadow: var(--shadow-card);
    transition: box-shadow var(--transition-base);
  }
  .method-card:hover { box-shadow: var(--shadow-card-hover); }
  .method-card.full-width { grid-column: 1 / -1; }
  .method-card h3 {
    font-size: 0.95rem;
    margin-bottom: 0.5rem;
    display: flex;
    align-items: center;
    gap: 0.4rem;
  }
  .method-card h3 i {
    color: var(--primary);
    font-size: 0.85rem;
  }
  .method-card p {
    font-size: 0.82rem;
    color: var(--text-muted);
    margin-bottom: 0.4rem;
    line-height: 1.55;
  }
  .method-card ul {
    list-style: none;
    padding: 0;
  }
  .method-card li {
    font-size: 0.8rem;
    padding: 0.2rem 0;
    padding-left: 1rem;
    position: relative;
    color: var(--text-muted);
  }
  .method-card li::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0.55em;
    width: 5px;
    height: 5px;
    border-radius: 50%;
    background: var(--primary);
  }

  .formula {
    font-family: 'Space Grotesk', monospace;
    font-size: 0.85rem;
    font-weight: 600;
    color: var(--dark);
    background: var(--light);
    padding: 0.5rem 0.75rem;
    border-radius: var(--radius-sm);
    border-left: 3px solid var(--primary);
    margin: 0.5rem 0;
  }

  .code-block {
    background: var(--dark);
    color: var(--text-on-dark);
    font-family: 'JetBrains Mono', 'Fira Code', monospace;
    font-size: 0.72rem;
    padding: 0.75rem;
    border-radius: var(--radius-sm);
    overflow-x: auto;
    line-height: 1.6;
    margin: 0.5rem 0;
    white-space: pre;
  }

  /* ── Constraint Table ── */
  .constraint-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.78rem;
    margin: 0.75rem 0;
  }
  .constraint-table th {
    background: var(--dark);
    color: var(--text-on-dark);
    font-size: 0.68rem;
    padding: 0.5rem 0.6rem;
    border-bottom: none;
  }
  .constraint-table td {
    padding: 0.4rem 0.6rem;
    border-bottom: 1px solid var(--border);
    vertical-align: top;
  }
  .constraint-table tr:nth-child(even) { background: var(--light); }
  .constraint-table .tier-tag {
    display: inline-block;
    font-size: 0.6rem;
    font-weight: 700;
    padding: 1px 5px;
    border-radius: 3px;
    text-transform: uppercase;
  }
  .tier-1 { background: #DBEAFE; color: #1E40AF; }
  .tier-2 { background: #FEF3C7; color: #92400E; }
  .tier-3 { background: #FEE2E2; color: #991B1B; }

  /* ── Adversarial Pairing Table ── */
  .pairing-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.78rem;
    margin: 0.5rem 0;
  }
  .pairing-table th {
    background: var(--dark-soft);
    color: var(--text-on-dark);
    font-size: 0.68rem;
    padding: 0.4rem 0.6rem;
    border-bottom: none;
    text-align: left;
  }
  .pairing-table td {
    padding: 0.35rem 0.6rem;
    border-bottom: 1px solid var(--border);
  }
  .pairing-table tr:nth-child(even) { background: var(--light); }

  /* ── Figure Grid ── */
  .fig-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 0.75rem;
  }
  .fig-card {
    background: var(--white);
    border: 1px solid var(--border);
    border-radius: var(--radius-md);
    overflow: hidden;
    box-shadow: var(--shadow-card);
    transition: box-shadow var(--transition-base);
  }
  .fig-card:hover { box-shadow: var(--shadow-card-hover); }
  .fig-card.full { grid-column: 1 / -1; }
  .caption {
    font-size: 0.72rem;
    color: var(--text-muted);
    padding: 0.5rem 0.75rem;
    border-top: 1px solid var(--border);
    background: var(--light);
    line-height: 1.5;
  }

  /* ── Btn ── */
  .btn {
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
    padding: 0.5rem 1rem;
    border-radius: var(--radius-sm);
    font-size: 0.8rem;
    font-weight: 600;
    text-decoration: none;
    transition: all var(--transition-fast);
    cursor: pointer;
    border: none;
  }
  .btn--primary {
    background: var(--primary);
    color: var(--white);
  }
  .btn--primary:hover { background: var(--primary-hover); color: var(--white); }
  .btn--outline {
    background: var(--white);
    color: var(--primary);
    border: 1px solid var(--primary);
  }
  .btn--outline:hover { background: var(--primary-light); }

  /* ── Footer ── */
  .footer {
    background: var(--dark);
    color: var(--text-on-dark);
    padding: 1.5rem 0;
    margin-top: auto;
  }
  .footer__inner {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 0.5rem;
  }
  .footer__social { display: flex; gap: 0.75rem; }
  .footer__social a {
    color: var(--text-muted-on-dark);
    font-size: 0.9rem;
    transition: color var(--transition-fast);
  }
  .footer__social a:hover { color: var(--white); }
  .footer__copy {
    font-size: 0.72rem;
    color: var(--text-muted-on-dark);
  }

  /* ── Empty State ── */
  .empty-state {
    text-align: center;
    padding: 3rem 1rem;
    color: var(--text-muted);
  }
  .empty-state i {
    font-size: 2rem;
    color: var(--border);
    margin-bottom: 0.75rem;
  }
  .empty-state p {
    font-size: 0.85rem;
    max-width: 400px;
    margin: 0 auto;
  }

  /* ── Clickable Model Name ── */
  .model-name-link {
    font-weight: 600;
    color: var(--primary);
    cursor: pointer;
    transition: color var(--transition-fast);
    text-decoration: none;
    border-bottom: 1px dashed transparent;
  }
  .model-name-link:hover {
    color: var(--primary-hover);
    border-bottom-color: var(--primary-hover);
  }

  /* ── Model Detail Modal ── */
  .modal-overlay {
    display: none;
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(15,23,42,0.6);
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
    z-index: 2000;
    align-items: flex-start;
    justify-content: center;
    padding: 60px 1rem 2rem;
    overflow-y: auto;
  }
  .modal-overlay.active {
    display: flex;
  }
  .modal {
    background: var(--white);
    border-radius: var(--radius-md);
    box-shadow: 0 20px 60px rgba(0,0,0,0.2);
    max-width: 900px;
    width: 100%;
    max-height: calc(100vh - 80px);
    overflow-y: auto;
    animation: modalIn 0.25s ease;
  }
  @keyframes modalIn {
    from { opacity: 0; transform: translateY(20px) scale(0.97); }
    to { opacity: 1; transform: translateY(0) scale(1); }
  }
  .modal__header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1rem 1.25rem;
    border-bottom: 1px solid var(--border);
    position: sticky;
    top: 0;
    background: var(--white);
    z-index: 1;
    border-radius: var(--radius-md) var(--radius-md) 0 0;
  }
  .modal__header h2 {
    font-size: 1.15rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }
  .modal__close {
    background: none;
    border: none;
    font-size: 1.2rem;
    color: var(--text-muted);
    cursor: pointer;
    padding: 0.25rem;
    border-radius: var(--radius-sm);
    transition: all var(--transition-fast);
  }
  .modal__close:hover {
    color: var(--dark);
    background: var(--light-alt);
  }
  .modal__body {
    padding: 1.25rem;
  }
  .modal__stats-row {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 0.5rem;
    margin-bottom: 1rem;
  }
  .modal__stat-card {
    text-align: center;
    padding: 0.6rem 0.4rem;
    background: var(--light);
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
  }
  .modal__stat-card .num {
    font-family: 'Space Grotesk', sans-serif;
    font-size: 1.3rem;
    font-weight: 700;
    line-height: 1;
  }
  .modal__stat-card .label {
    font-size: 0.65rem;
    text-transform: uppercase;
    letter-spacing: 0.04em;
    color: var(--text-muted);
    margin-top: 0.15rem;
  }
  .modal__chart-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 0.75rem;
    margin-bottom: 1rem;
  }
  .modal__chart-card {
    background: var(--white);
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    padding: 0.75rem;
  }
  .modal__chart-card.full {
    grid-column: 1 / -1;
  }
  .modal__chart-card h4 {
    font-size: 0.8rem;
    font-weight: 600;
    margin-bottom: 0.5rem;
    color: var(--dark);
  }
  .modal__subject-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 0.4rem;
  }
  .modal__subject-item {
    text-align: center;
    padding: 0.4rem;
    background: var(--light);
    border-radius: var(--radius-sm);
    border: 1px solid var(--border);
  }
  .modal__subject-item .subj-name {
    font-size: 0.68rem;
    text-transform: capitalize;
    color: var(--text-muted);
  }
  .modal__subject-item .subj-val {
    font-family: 'Space Grotesk', sans-serif;
    font-size: 1rem;
    font-weight: 700;
  }

  /* ── Responsive ── */
  @media (max-width: 768px) {
    .fig-grid, .method-grid { grid-template-columns: 1fr; }
    .fig-card.full { grid-column: 1; }
    .method-card.full-width { grid-column: 1; }
    .hero__title { font-size: 2rem; }
    .hero__stats { gap: 0.35rem; }
    .hero__stat { padding: 0.35rem 0.6rem; }
    .hero__stat-num { font-size: 1rem; }
  }

  @media (max-width: 480px) {
    .nav__toggle { display: flex; }
    .nav__links {
      position: fixed;
      top: 50px;
      left: 0;
      right: 0;
      background: rgba(255,255,255,0.98);
      backdrop-filter: blur(12px);
      flex-direction: column;
      align-items: center;
      padding: 1rem 0;
      gap: 0.5rem;
      transform: translateY(-120%);
      transition: transform var(--transition-base);
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }
    .nav__links.open { transform: translateY(0); }
  }
</style>
</head>
<body>

<!-- Navigation -->
<nav class="nav" id="navbar">
  <div class="container nav__inner">
    <a href="#" class="nav__logo">Cog<span>Bench</span><span class="v2">V2</span></a>
    <button class="nav__toggle" id="navToggle" aria-label="Toggle navigation">
      <span></span>
      <span></span>
      <span></span>
    </button>
    <ul class="nav__links" id="navLinks">
      <li><a href="#leaderboard">Leaderboard</a></li>
      <li><a href="#constraints">Constraints</a></li>
      <li><a href="#adversarial">Adversarial</a></li>
      <li><a href="#analysis">Analysis</a></li>
      <li><a href="#methodology">Methodology</a></li>
      <li><a href="#submit">Submit</a></li>
      <li><a href="#citation">Citation</a></li>
      <li class="nav__divider"></li>
      <li><a href="https://pypi.org/project/cogbench/" target="_blank" rel="noopener" title="PyPI"><i class="fas fa-cube"></i></a></li>
      <li><a href="https://github.com/cogbench/cogbench" target="_blank" rel="noopener" title="GitHub"><i class="fab fa-github"></i></a></li>
    </ul>
  </div>
</nav>

<main>
  <!-- Hero -->
  <div class="hero">
    <div class="container">
      <div class="hero__inner fade-in">
        <h1 class="hero__title">CogBench</h1>
        <p class="hero__subtitle">A verifiable constraint benchmark for evaluating cognitive-level control in LLM question generation using Bloom's Taxonomy</p>
        <div class="hero__stats" id="stats"></div>
        <div class="hero__install fade-in">
          <code class="hero__install-code">pip install cogbench</code>
          <div class="hero__badges">
            <a href="https://pypi.org/project/cogbench/" class="hero__badge" target="_blank" rel="noopener">
              <img src="https://img.shields.io/pypi/v/cogbench?style=flat-square&color=2563EB&label=PyPI" alt="PyPI version">
            </a>
            <a href="https://github.com/cogbench/cogbench" class="hero__badge" target="_blank" rel="noopener">
              <img src="https://img.shields.io/github/stars/cogbench/cogbench?style=flat-square&color=0F172A&label=GitHub" alt="GitHub stars">
            </a>
            <a href="https://pypi.org/project/cogbench/" class="hero__badge" target="_blank" rel="noopener">
              <img src="https://img.shields.io/pypi/pyversions/cogbench?style=flat-square&color=059669&label=Python" alt="Python versions">
            </a>
          </div>
        </div>
        <div class="hero__tagline">
          <i class="fas fa-check-circle"></i>
          Deterministic evaluation &mdash; no LLM judge, no trained classifier, same input &rarr; same score
        </div>
      </div>
    </div>
  </div>

  <!-- Leaderboard -->
  <section class="content-section" id="leaderboard">
    <div class="container">
      <h2 class="content-section__title">Leaderboard</h2>
      <p class="content-section__subtitle">Models ranked by Adversarial Gap. Lower gap = better cognitive understanding beyond keyword-stuffing.</p>

      <div class="table-wrap fade-in">
        <table id="lb-table">
          <thead>
            <tr>
              <th data-key="rank">Rank <span class="arrow"></span></th>
              <th data-key="model_name">Model <span class="arrow"></span></th>
              <th data-key="model_params">Params <span class="arrow"></span></th>
              <th data-key="standard_csr">Std CSR <span class="arrow"></span></th>
              <th data-key="adversarial_csr">Adv CSR <span class="arrow"></span></th>
              <th data-key="gap">Gap &darr; <span class="arrow"></span></th>
              <th data-key="constraint_strict">Constraint % <span class="arrow"></span></th>
              <th data-key="prompt_strict">Prompt % <span class="arrow"></span></th>
            </tr>
          </thead>
          <tbody id="lb-body"></tbody>
        </table>
      </div>
      <p style="font-size:0.7rem; color:var(--text-muted); margin-top:0.5rem;">
        Click any model name for detailed analytics.
        <strong>Std CSR</strong> = Standard Constraint Satisfaction Rate (prompt-level strict).
        <strong>Adv CSR</strong> = Adversarial mode. <strong>Gap</strong> = Std &minus; Adv (lower is better).
        <strong>Constraint %</strong> = Individual constraint pass rate. <strong>Prompt %</strong> = % of prompts where ALL constraints pass.
      </p>
    </div>
  </section>

  <!-- Model Detail Modal -->
  <div class="modal-overlay" id="model-modal">
    <div class="modal">
      <div class="modal__header">
        <h2 id="modal-title"><i class="fas fa-robot" style="color:var(--primary);"></i> <span id="modal-model-name"></span></h2>
        <button class="modal__close" onclick="closeModal()">&times;</button>
      </div>
      <div class="modal__body" id="modal-body"></div>
    </div>
  </div>

  <!-- Constraints -->
  <section class="content-section" id="constraints">
    <div class="container">
      <h2 class="content-section__title">Verifiable Constraints</h2>
      <p class="content-section__subtitle">28 deterministic rules across 3 tiers. Every constraint returns pass/fail with no subjectivity.</p>

      <div class="method-grid" style="margin-bottom:1rem;">
        <div class="method-card fade-in">
          <h3><i class="fas fa-ruler"></i> Tier 1 &mdash; Structural</h3>
          <p>String matching, word counting, keyword detection. Zero external dependencies.</p>
          <ul>
            <li>Is output a question? (ends with "?")</li>
            <li>Word count within 10-150 range</li>
            <li>Contains level-appropriate vocabulary</li>
            <li>Answer length and format checks</li>
          </ul>
        </div>
        <div class="method-card fade-in">
          <h3><i class="fas fa-brain"></i> Tier 2 &mdash; Semantic</h3>
          <p>NLI-based entailment verification using DeBERTa-v3 (fixed threshold, not a judge).</p>
          <ul>
            <li>D3: Answer is supported by passage (&gt;65% entailment)</li>
            <li>P2: Apply scenario is novel (not in passage)</li>
            <li>C2: Create output is original (not extractable)</li>
          </ul>
        </div>
      </div>

      <div class="method-card full-width fade-in" style="margin-bottom:1rem;">
        <h3><i class="fas fa-list-check"></i> Complete Constraint Map</h3>
        <div style="overflow-x:auto;">
          <table class="constraint-table">
            <thead>
              <tr>
                <th>Level</th>
                <th>ID</th>
                <th>Constraint</th>
                <th>What It Checks</th>
                <th>Tier</th>
              </tr>
            </thead>
            <tbody>
              <tr><td rowspan="4" style="font-weight:700;">Universal</td>
                <td>U1</td><td>IsQuestion</td><td>Output is a question or task prompt (ends with "?" or uses interrogative/task structure)</td><td><span class="tier-tag tier-1">Tier 1</span></td></tr>
              <tr><td>U2</td><td>WordCount</td><td>Question is 5&ndash;150 words (5 for Remember, 10 for others)</td><td><span class="tier-tag tier-1">Tier 1</span></td></tr>
              <tr><td>U3</td><td>PassageRelevance</td><td>&ge;1 key term (Remember) or &ge;2 (others) from passage in Q+A</td><td><span class="tier-tag tier-1">Tier 1</span></td></tr>
              <tr><td>U4</td><td>NoDegenerateOutput</td><td>No word repeated &gt;3&times;, not empty</td><td><span class="tier-tag tier-1">Tier 1</span></td></tr>

              <tr><td rowspan="4" style="font-weight:700; color:#2563EB;">L1 Remember</td>
                <td>R1</td><td>Vocabulary</td><td>Uses recall verbs (define, list, identify&hellip;) or natural recall patterns (What is, How many, When did&hellip;)</td><td><span class="tier-tag tier-1">Tier 1</span></td></tr>
              <tr><td>R2</td><td>SingleConcept</td><td>Targets &le;2 key concepts (deduplicated: cell/cell cycle = 1)</td><td><span class="tier-tag tier-1">Tier 1</span></td></tr>
              <tr><td>R3</td><td>ShortAnswer</td><td>Reference answer &le;20 words</td><td><span class="tier-tag tier-1">Tier 1</span></td></tr>
              <tr><td>R4</td><td>Extractable</td><td>&ge;60% of answer words in passage</td><td><span class="tier-tag tier-1">Tier 1</span></td></tr>

              <tr><td rowspan="4" style="font-weight:700; color:#7C3AED;">L2 Understand</td>
                <td>D1</td><td>Vocabulary</td><td>Uses comprehension verbs (explain, describe&hellip;) or natural patterns (Why is, How does, What is the purpose&hellip;)</td><td><span class="tier-tag tier-1">Tier 1</span></td></tr>
              <tr><td>D2</td><td>NotCopied</td><td>&lt;70% trigram overlap between answer and passage</td><td><span class="tier-tag tier-1">Tier 1</span></td></tr>
              <tr><td>D3</td><td>Supported</td><td>NLI: answer not contradicted by passage (contradiction &lt;50%)</td><td><span class="tier-tag tier-2">Tier 2</span></td></tr>
              <tr><td>D4</td><td>AsksMeaning</td><td>Contains meaning markers (how, why, explain, describe&hellip;)</td><td><span class="tier-tag tier-1">Tier 1</span></td></tr>

              <tr><td rowspan="4" style="font-weight:700; color:#059669;">L3 Apply</td>
                <td>P1</td><td>Vocabulary</td><td>Uses apply verbs (calculate, solve&hellip;) or scenario framing (If a&hellip;, Given that&hellip;, A researcher&hellip;)</td><td><span class="tier-tag tier-1">Tier 1</span></td></tr>
              <tr><td>P2</td><td>NewScenario</td><td>NLI: passage does NOT entail scenario (&gt;55%)</td><td><span class="tier-tag tier-2">Tier 2</span></td></tr>
              <tr><td>P3</td><td>MethodReference</td><td>Q+A references &ge;1 key concept or method from passage</td><td><span class="tier-tag tier-1">Tier 1</span></td></tr>
              <tr><td>P4</td><td>SpecificResult</td><td>Answer contains concrete reasoning (numbers, causal logic, outcomes, method application)</td><td><span class="tier-tag tier-1">Tier 1</span></td></tr>

              <tr><td rowspan="4" style="font-weight:700; color:#DC2626;">L4 Analyze</td>
                <td>A1</td><td>Vocabulary</td><td>Uses analysis verbs (compare, contrast&hellip;) or analytical patterns (How do X differ, What is the relationship&hellip;)</td><td><span class="tier-tag tier-1">Tier 1</span></td></tr>
              <tr><td>A2</td><td>MultipleConcepts</td><td>&ge;2 key concepts in Q+A (with acronym matching)</td><td><span class="tier-tag tier-1">Tier 1</span></td></tr>
              <tr><td>A3</td><td>Relationship</td><td>Contains relationship markers (between, differ, compare&hellip;)</td><td><span class="tier-tag tier-1">Tier 1</span></td></tr>
              <tr><td>A4</td><td>AnswerCoverage</td><td>Answer addresses all concepts from question</td><td><span class="tier-tag tier-1">Tier 1</span></td></tr>

              <tr><td rowspan="4" style="font-weight:700; color:#EA580C;">L5 Evaluate</td>
                <td>E1</td><td>Vocabulary</td><td>Uses judgment verbs (assess, critique, justify&hellip;)</td><td><span class="tier-tag tier-1">Tier 1</span></td></tr>
              <tr><td>E2</td><td>Claim</td><td>Presents something to evaluate (should, justify, claim, position, strengths/weaknesses&hellip;)</td><td><span class="tier-tag tier-1">Tier 1</span></td></tr>
              <tr><td>E3</td><td>EvidenceRequest</td><td>Asks for evidence-based reasoning</td><td><span class="tier-tag tier-1">Tier 1</span></td></tr>
              <tr><td>E4</td><td>Argumentation</td><td>Answer contains argumentation (contrastive, causal, evaluative, or structured reasoning)</td><td><span class="tier-tag tier-1">Tier 1</span></td></tr>

              <tr><td rowspan="4" style="font-weight:700; color:#9333EA;">L6 Create</td>
                <td>C1</td><td>Vocabulary</td><td>Uses creation verbs (design, propose, develop&hellip;)</td><td><span class="tier-tag tier-1">Tier 1</span></td></tr>
              <tr><td>C2</td><td>Novel</td><td>NLI: passage does NOT entail answer (&gt;60%)</td><td><span class="tier-tag tier-2">Tier 2</span></td></tr>
              <tr><td>C3</td><td>Specifications</td><td>&ge;2 specification markers (must, should, include&hellip;)</td><td><span class="tier-tag tier-1">Tier 1</span></td></tr>
              <tr><td>C4</td><td>SubstantialAnswer</td><td>Answer is &gt;50 words</td><td><span class="tier-tag tier-1">Tier 1</span></td></tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </section>

  <!-- Adversarial -->
  <section class="content-section" id="adversarial">
    <div class="container">
      <h2 class="content-section__title">Adversarial Mode</h2>
      <p class="content-section__subtitle">The headline metric: can LLMs satisfy cognitive constraints when forced to use misleading vocabulary?</p>

      <div class="method-grid">
        <div class="method-card fade-in">
          <h3><i class="fas fa-shuffle"></i> What Is Adversarial Mode?</h3>
          <p>In standard mode, an LLM generates an "Analyze" question and naturally uses words like "compare" and "contrast". Easy.</p>
          <p>In adversarial mode, the LLM must generate an "Analyze" question but using <strong>Remember</strong> vocabulary ("identify", "name", "list"). The structural constraints for Analyze (A2, A3, A4) must still pass.</p>
          <p>This tests whether the model truly understands cognitive complexity or just keyword-stuffs.</p>
        </div>
        <div class="method-card fade-in">
          <h3><i class="fas fa-chart-line"></i> The Adversarial Gap</h3>
          <div class="formula">Gap = Standard CSR &minus; Adversarial CSR</div>
          <p>If a model scores 85% standard but 25% adversarial, its 60pp gap means most "success" came from vocabulary cues, not genuine understanding.</p>
          <p><strong>Ideal model:</strong> Gap &approx; 0 (cognitive control is vocabulary-independent).</p>
          <p><strong>Weak model:</strong> Large gap (relies on keywords for apparent competence).</p>
        </div>
        <div class="method-card full-width fade-in">
          <h3><i class="fas fa-arrows-turn-to-dots"></i> Adversarial Pairings</h3>
          <table class="pairing-table">
            <thead>
              <tr>
                <th>Generate This Level</th>
                <th>Using Vocabulary From</th>
                <th>What It Tests</th>
              </tr>
            </thead>
            <tbody>
              <tr><td>L2 Understand</td><td>L1 Remember verbs</td><td>Can you explain using "identify" and "list"?</td></tr>
              <tr><td>L3 Apply</td><td>L2 Understand verbs</td><td>Can you apply using "explain" and "describe"?</td></tr>
              <tr><td>L4 Analyze</td><td>L1 Remember verbs</td><td>Can you analyze using "name" and "what is"?</td></tr>
              <tr><td>L5 Evaluate</td><td>L2 Understand verbs</td><td>Can you judge using "summarize" and "discuss"?</td></tr>
              <tr><td>L6 Create</td><td>L3 Apply verbs</td><td>Can you create using "solve" and "calculate"?</td></tr>
              <tr><td>L1 Remember</td><td>L4 Analyze verbs</td><td>Can you recall facts using "compare" and "examine"?</td></tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </section>

  <!-- Analysis -->
  <section class="content-section" id="analysis">
    <div class="container">
      <h2 class="content-section__title">Analysis</h2>
      <p class="content-section__subtitle">Visual breakdown of standard vs. adversarial performance across models and Bloom's levels.</p>

      <div class="fig-grid">
        <div class="fig-card full fade-in">
          <div style="padding:0.75rem 0.75rem 0.25rem; background:var(--white);">
            <canvas id="chart-gap" height="140"></canvas>
          </div>
          <div class="caption"><strong>Fig 1.</strong> Adversarial Gap per model. Standard CSR (blue) vs. Adversarial CSR (orange). The gap between them reveals keyword reliance.</div>
        </div>
        <div class="fig-card fade-in">
          <div style="padding:0.75rem 0.75rem 0.25rem; background:var(--white); position:relative;">
            <canvas id="chart-levels-std"></canvas>
          </div>
          <div class="caption"><strong>Fig 2.</strong> Standard mode CSR by Bloom's level. Higher levels (Evaluate, Create) are typically harder.</div>
        </div>
        <div class="fig-card fade-in">
          <div style="padding:0.75rem 0.75rem 0.25rem; background:var(--white); position:relative;">
            <canvas id="chart-levels-adv"></canvas>
          </div>
          <div class="caption"><strong>Fig 3.</strong> Adversarial mode CSR by Bloom's level. The drop from standard reveals which levels rely most on vocabulary cues.</div>
        </div>
        <div class="fig-card full fade-in">
          <div style="padding:0.75rem 0.75rem 0.25rem; background:var(--white);">
            <canvas id="chart-constraints" height="120"></canvas>
          </div>
          <div class="caption"><strong>Fig 4.</strong> Per-constraint pass rate across all models (standard mode). Identifies which constraints are hardest to satisfy.</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Methodology -->
  <section class="content-section" id="methodology">
    <div class="container">
      <h2 class="content-section__title">Methodology</h2>
      <p class="content-section__subtitle">How CogBench evaluates cognitive-level control with deterministic, verifiable constraints.</p>
      <div class="method-grid">
        <div class="method-card fade-in">
          <h3><i class="fas fa-check-double"></i> IFEval-Style Evaluation</h3>
          <p>Inspired by <a href="https://arxiv.org/abs/2311.07911">IFEval</a>, every constraint is a deterministic rule. No trained classifier, no LLM-as-judge.</p>
          <div class="formula">Same input &rarr; same score, every time</div>
          <p>This eliminates inter-rater disagreement and makes results perfectly reproducible.</p>
        </div>
        <div class="method-card fade-in">
          <h3><i class="fas fa-layer-group"></i> Bloom's Taxonomy Levels</h3>
          <ul>
            <li><strong>L1 Remember</strong> &mdash; Recall facts directly from text</li>
            <li><strong>L2 Understand</strong> &mdash; Explain ideas in own words</li>
            <li><strong>L3 Apply</strong> &mdash; Use knowledge in new situations</li>
            <li><strong>L4 Analyze</strong> &mdash; Break apart and find relationships</li>
            <li><strong>L5 Evaluate</strong> &mdash; Make evidence-based judgments</li>
            <li><strong>L6 Create</strong> &mdash; Produce something original</li>
          </ul>
        </div>
        <div class="method-card fade-in">
          <h3><i class="fas fa-chart-bar"></i> Metrics</h3>
          <ul>
            <li><strong>Prompt-level strict</strong> &mdash; % of questions where ALL constraints pass</li>
            <li><strong>Prompt-level loose</strong> &mdash; Same with score &ge;0.5 threshold</li>
            <li><strong>Constraint-level strict</strong> &mdash; % of individual constraints that pass</li>
            <li><strong>Adversarial gap</strong> &mdash; Standard &minus; Adversarial CSR (headline metric)</li>
          </ul>
        </div>
        <div class="method-card fade-in">
          <h3><i class="fas fa-book-open"></i> Source Passages</h3>
          <p>120 passages scraped from <strong>OpenStax</strong> (CC-BY licensed textbooks). 15 passages per subject across 8 disciplines:</p>
          <p style="font-size:0.78rem; font-weight:500; color:var(--dark);">Biology, Chemistry, Physics, Mathematics, Psychology, Economics, History, Computer Science</p>
          <p>Each passage is 300-800 words with extracted key concepts and method/principle terms.</p>
        </div>
        <div class="method-card full-width fade-in">
          <h3><i class="fas fa-scale-balanced"></i> Why Verifiable Constraints?</h3>
          <p>Previous approaches use trained classifiers or LLM-as-judge to evaluate question quality. These have fundamental problems:</p>
          <ul>
            <li><strong>Circular reasoning</strong> &mdash; A model judging a model. If the judge is wrong, all scores are wrong.</li>
            <li><strong>Non-reproducible</strong> &mdash; Different runs of the same judge give different scores.</li>
            <li><strong>Low agreement</strong> &mdash; Inter-annotator agreement for Bloom's classification is often &lt;50%.</li>
          </ul>
          <p>CogBench defines cognitive complexity through <strong>checkable structural properties</strong>. A Remember question must have an extractable answer (R4). An Analyze question must reference &ge;2 concepts (A2). These are verifiable facts, not subjective judgments.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Submit -->
  <section class="content-section" id="submit">
    <div class="container">
      <h2 class="content-section__title">Submit Your Model</h2>
      <p class="content-section__subtitle">Evaluate your LLM and get ranked on the leaderboard.</p>
      <div class="method-grid">
        <div class="method-card fade-in">
          <h3><i class="fas fa-download"></i> 1. Install CogBench</h3>
          <div class="code-block">pip install cogbench</div>
          <p>Verify the installation:</p>
          <div class="code-block">cogbench info</div>
          <p style="margin-top:0.5rem; font-size:0.78rem; color:var(--text-muted);">Or install from source:</p>
          <div class="code-block" style="font-size:0.72rem;">git clone https://github.com/cogbench/cogbench
cd cogbench && pip install -e .</div>
        </div>
        <div class="method-card fade-in">
          <h3><i class="fas fa-play"></i> 2. Run the Benchmark</h3>
          <p>Generate questions from your model across all 120 passages and 6 Bloom's levels in both standard and adversarial modes:</p>
          <div class="code-block">cogbench run --model your-model:size \
  --mode both</div>
          <p style="margin-top:0.5rem;">This produces 1,440 questions (720 standard + 720 adversarial) and evaluates all 28 constraints automatically. Models are served via <a href="https://ollama.com" style="color:var(--primary);">Ollama</a>.</p>
        </div>
        <div class="method-card full-width fade-in">
          <h3><i class="fas fa-paper-plane"></i> 3. Submit Results</h3>
          <p>Submit your evaluated results to appear on the leaderboard. Requires the <a href="https://cli.github.com" style="color:var(--primary);">GitHub CLI</a> (<code style="font-size:0.78rem;">gh</code>):</p>
          <div class="code-block">cogbench submit --name "Your Name"</div>
          <p style="margin-top:0.5rem;">This packages your results, computes metrics, and creates a GitHub issue on the CogBench repo. The maintainers will review and add your model to the leaderboard.</p>
          <p style="margin-top:0.25rem; font-size:0.78rem; color:var(--text-muted);">To submit a specific model: <code style="font-size:0.72rem;">cogbench submit --model qwen2.5:14b --name "Your Name"</code></p>
        </div>
      </div>
    </div>
  </section>

  <!-- Citation -->
  <section class="content-section" id="citation">
    <div class="container">
      <h2 class="content-section__title">Citation</h2>
      <p class="content-section__subtitle">If you use CogBench in your research, please cite:</p>
      <div class="method-card fade-in" style="max-width:600px">
        <div class="code-block">@misc{kunuku2026cogbench,
  title     = {CogBench: A Verifiable Constraint
               Benchmark for Cognitive-Level Control
               in LLM Question Generation},
  author    = {Kunuku, Mourya Teja and Nasrin, Dena},
  year      = {2026}
}</div>
      </div>
    </div>
  </section>
</main>

<!-- Footer -->
<footer class="footer">
  <div class="container">
    <div class="footer__inner">
      <div class="footer__social">
        <a href="https://pypi.org/project/cogbench/" aria-label="PyPI" target="_blank" rel="noopener"><i class="fas fa-cube"></i></a>
        <a href="https://github.com/cogbench/cogbench" aria-label="GitHub" target="_blank" rel="noopener"><i class="fab fa-github"></i></a>
        <a href="mailto:kunukumourya@gmail.com" aria-label="Email"><i class="fas fa-envelope"></i></a>
      </div>
      <p class="footer__copy">CogBench &mdash; Verifiable Cognitive Constraint Benchmark &mdash; <code style="font-size:0.7rem; background:rgba(255,255,255,0.1); padding:2px 6px; border-radius:3px;">pip install cogbench</code></p>
    </div>
  </div>
</footer>

<script>
  let DATA = null;
  let sortKey = 'gap';
  let sortAsc = true;
  let modalCharts = [];

  // ── Colors (dark, saturated tones) ──
  const COLORS = {
    blue: '#1E3A8A',
    orange: '#9A3412',
    green: '#065F46',
    purple: '#5B21B6',
    red: '#991B1B',
    gold: '#92400E',
    teal: '#115E59',
    pink: '#9D174D',
    levels: ['#1E3A8A', '#5B21B6', '#065F46', '#991B1B', '#9A3412', '#6B21A8'],
    levelNames: ['L1 Remember', 'L2 Understand', 'L3 Apply', 'L4 Analyze', 'L5 Evaluate', 'L6 Create'],
  };

  const CONSTRAINT_COLORS = {
    U: '#334155', R: '#1E3A8A', D: '#5B21B6', P: '#065F46',
    A: '#991B1B', E: '#9A3412', C: '#6B21A8',
  };

  async function init() {
    try {
      const res = await fetch('data.json');
      DATA = await res.json();
    } catch(e) { console.error('Failed to load data.json:', e); return; }
    try { renderStats(); } catch(e) { console.error('renderStats:', e); }
    try { renderTable(); } catch(e) { console.error('renderTable:', e); }
    try { setupSort(); } catch(e) { console.error('setupSort:', e); }
    try { renderGapChart(); } catch(e) { console.error('renderGapChart:', e); }
    try { renderStdLevelChart(); } catch(e) { console.error('renderStdLevelChart:', e); }
    try { renderAdvLevelChart(); } catch(e) { console.error('renderAdvLevelChart:', e); }
    try { renderConstraintChart(); } catch(e) { console.error('renderConstraintChart:', e); }
    try { initAnimations(); } catch(e) { console.error('initAnimations:', e); }
    try { initNav(); } catch(e) { console.error('initNav:', e); }
  }

  // ── Stats ──
  function renderStats() {
    const s = DATA.stats;
    const el = document.getElementById('stats');
    const items = [
      { num: s.passages, label: 'Passages' },
      { num: s.subjects, label: 'Subjects' },
      { num: s.bloom_levels, label: "Bloom's Levels" },
      { num: s.constraints, label: 'Constraints' },
      { num: s.adversarial_pairings, label: 'Adv Pairings' },
      { num: s.models_evaluated || '...', label: 'Models' },
    ];
    el.innerHTML = items.map(i =>
      `<div class="hero__stat"><span class="hero__stat-num">${i.num}</span><span class="hero__stat-label">${i.label}</span></div>`
    ).join('');
  }

  // ── Main Leaderboard ──
  function renderTable() {
    const rows = [...(DATA.leaderboard || [])];
    if (!rows.length) {
      document.getElementById('lb-body').innerHTML =
        '<tr><td colspan="8" style="text-align:center; padding:2rem; color:var(--text-muted);">' +
        '<i class="fas fa-hourglass-half" style="font-size:1.2rem; display:block; margin-bottom:0.5rem;"></i>' +
        'Benchmark running &mdash; results will appear here once complete.</td></tr>';
      return;
    }

    rows.sort((a, b) => {
      let va = a[sortKey], vb = b[sortKey];
      if (sortKey === 'gap') return sortAsc ? va - vb : vb - va;
      if (typeof va === 'number') return sortAsc ? vb - va : va - vb;
      return sortAsc ? String(va).localeCompare(String(vb)) : String(vb).localeCompare(String(va));
    });

    const tbody = document.getElementById('lb-body');
    tbody.innerHTML = rows.map((r, i) => {
      const rank = i + 1;
      const rankClass = rank <= 3 ? ` rank-${rank}` : '';
      const typeTag = r.model_type === 'local'
        ? '<span class="type-tag type-tag--local">Local</span>'
        : '<span class="type-tag type-tag--api">API</span>';
      const gapClass = r.gap > 0.15 ? 'gap-positive' : r.gap < 0.05 ? 'gap-negative' : '';
      const escapedName = r.model_name.replace(/'/g, "\\'");

      return `<tr>
        <td class="rank-cell${rankClass}">${rank}</td>
        <td><span class="model-name-link" onclick="openModal('${escapedName}')">${r.model_name}</span> ${typeTag}</td>
        <td>${r.model_params}</td>
        <td style="font-variant-numeric:tabular-nums; font-weight:500;">${(r.standard_csr * 100).toFixed(1)}%</td>
        <td style="font-variant-numeric:tabular-nums; font-weight:500;">${(r.adversarial_csr * 100).toFixed(1)}%</td>
        <td class="${gapClass}" style="font-variant-numeric:tabular-nums;">${(r.gap * 100).toFixed(1)}pp</td>
        <td style="font-variant-numeric:tabular-nums;">${(r.constraint_strict * 100).toFixed(1)}%</td>
        <td style="font-variant-numeric:tabular-nums;">${(r.prompt_strict * 100).toFixed(1)}%</td>
      </tr>`;
    }).join('');
  }

  // ── Sorting ──
  function setupSort() {
    document.querySelectorAll('#lb-table th[data-key]').forEach(th => {
      th.addEventListener('click', () => {
        const key = th.dataset.key;
        if (sortKey === key) { sortAsc = !sortAsc; }
        else { sortKey = key; sortAsc = key === 'gap'; }
        renderTable();
      });
    });
  }

  // ══════════════════════════════════════════════════════════════════
  // Modal — Detailed Model Analytics
  // ══════════════════════════════════════════════════════════════════

  function openModal(modelName) {
    const details = (DATA.model_details || {})[modelName];
    if (!details) {
      alert('No detail data available for ' + modelName + ' yet.');
      return;
    }

    // Destroy previous modal charts
    modalCharts.forEach(c => c.destroy());
    modalCharts = [];

    document.getElementById('modal-model-name').textContent = modelName;

    const body = document.getElementById('modal-body');
    const gapColor = details.gap > 0.15 ? 'var(--red)' : details.gap < 0.05 ? 'var(--green)' : 'var(--gold)';

    body.innerHTML = `
      <!-- Summary Stats -->
      <div class="modal__stats-row">
        <div class="modal__stat-card">
          <div class="num" style="color:var(--primary);">${(details.prompt_strict * 100).toFixed(1)}%</div>
          <div class="label">Std CSR</div>
        </div>
        <div class="modal__stat-card">
          <div class="num" style="color:var(--orange, #D55E00);">${(details.adversarial_csr * 100).toFixed(1)}%</div>
          <div class="label">Adv CSR</div>
        </div>
        <div class="modal__stat-card">
          <div class="num" style="color:${gapColor};">${(details.gap * 100).toFixed(1)}pp</div>
          <div class="label">Gap</div>
        </div>
        <div class="modal__stat-card">
          <div class="num" style="color:var(--teal, #0D9488);">${(details.constraint_strict * 100).toFixed(1)}%</div>
          <div class="label">Constraint %</div>
        </div>
      </div>

      <!-- Additional metrics row -->
      <div class="modal__stats-row">
        <div class="modal__stat-card">
          <div class="num" style="color:var(--text-muted); font-size:1rem;">${(details.prompt_loose * 100).toFixed(1)}%</div>
          <div class="label">Prompt Loose</div>
        </div>
        <div class="modal__stat-card">
          <div class="num" style="color:var(--text-muted); font-size:1rem;">${(details.constraint_loose * 100).toFixed(1)}%</div>
          <div class="label">Constraint Loose</div>
        </div>
        <div class="modal__stat-card">
          <div class="num" style="color:var(--text-muted); font-size:1rem;">${details.n_standard || 0}</div>
          <div class="label">Std Questions</div>
        </div>
        <div class="modal__stat-card">
          <div class="num" style="color:var(--text-muted); font-size:1rem;">${details.n_adversarial || 0}</div>
          <div class="label">Adv Questions</div>
        </div>
      </div>

      <!-- Charts -->
      <div class="modal__chart-grid">
        <div class="modal__chart-card">
          <h4><i class="fas fa-layer-group" style="color:var(--primary);"></i> Per-Level CSR (Std vs Adv)</h4>
          <canvas id="modal-chart-levels" height="200"></canvas>
        </div>
        <div class="modal__chart-card">
          <h4><i class="fas fa-list-check" style="color:var(--purple, #7C3AED);"></i> Per-Constraint Pass Rate</h4>
          <canvas id="modal-chart-constraints" height="200"></canvas>
        </div>
      </div>

      <!-- Subject Breakdown -->
      <div class="modal__chart-card full" style="margin-bottom:0.75rem;">
        <h4><i class="fas fa-book" style="color:var(--green, #009E73);"></i> Per-Subject CSR (Standard)</h4>
        <div class="modal__subject-grid" id="modal-subjects"></div>
      </div>

      <!-- Tier Breakdown -->
      <div class="modal__chart-card full">
        <h4><i class="fas fa-shield-halved" style="color:var(--gold, #E69F00);"></i> Per-Tier Pass Rate</h4>
        <canvas id="modal-chart-tiers" height="80"></canvas>
      </div>
    `;

    // Render per-level chart (standard vs adversarial)
    renderModalLevelChart(details);

    // Render per-constraint chart
    renderModalConstraintChart(details);

    // Render subject grid
    renderModalSubjects(details);

    // Render tier chart
    renderModalTierChart(details);

    // Show modal
    document.getElementById('model-modal').classList.add('active');
    document.body.style.overflow = 'hidden';
  }

  function closeModal() {
    document.getElementById('model-modal').classList.remove('active');
    document.body.style.overflow = '';
    modalCharts.forEach(c => c.destroy());
    modalCharts = [];
  }

  // Close modal on overlay click or Escape
  document.getElementById('model-modal').addEventListener('click', function(e) {
    if (e.target === this) closeModal();
  });
  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') closeModal();
  });

  function renderModalLevelChart(details) {
    const pl = details.per_level || {};
    const std = pl.standard || {};
    const adv = pl.adversarial || {};
    const labels = COLORS.levelNames;
    const stdData = [1,2,3,4,5,6].map(l => (std[String(l)] || 0) * 100);
    const advData = [1,2,3,4,5,6].map(l => (adv[String(l)] || 0) * 100);

    const chart = new Chart(document.getElementById('modal-chart-levels'), {
      type: 'bar',
      data: {
        labels,
        datasets: [
          { label: 'Standard', data: stdData, backgroundColor: COLORS.blue + 'DD', borderColor: COLORS.blue, borderWidth: 1 },
          { label: 'Adversarial', data: advData, backgroundColor: COLORS.orange + 'DD', borderColor: COLORS.orange, borderWidth: 1 },
        ]
      },
      options: {
        responsive: true,
        plugins: { legend: { position: 'top', labels: { font: { size: 10 }, boxWidth: 10 } } },
        scales: {
          y: { beginAtZero: true, max: 100, title: { display: true, text: 'CSR (%)', font: { size: 10 } }, ticks: { font: { size: 9 } } },
          x: { ticks: { font: { size: 9 }, maxRotation: 45 } },
        },
      }
    });
    modalCharts.push(chart);
  }

  function renderModalConstraintChart(details) {
    const pc = details.per_constraint || {};
    const ids = Object.keys(pc).sort();
    if (!ids.length) return;

    const rates = ids.map(id => (pc[id] || 0) * 100);
    const colors = ids.map(id => CONSTRAINT_COLORS[id[0]] || '#94A3B8');

    const chart = new Chart(document.getElementById('modal-chart-constraints'), {
      type: 'bar',
      data: {
        labels: ids,
        datasets: [{ data: rates, backgroundColor: colors.map(c => c + 'DD'), borderColor: colors, borderWidth: 1 }]
      },
      options: {
        responsive: true,
        plugins: { legend: { display: false } },
        scales: {
          y: { beginAtZero: true, max: 100, title: { display: true, text: 'Pass Rate (%)', font: { size: 10 } }, ticks: { font: { size: 9 } } },
          x: { ticks: { font: { size: 8 }, maxRotation: 60 } },
        },
      }
    });
    modalCharts.push(chart);
  }

  function renderModalSubjects(details) {
    const ps = details.per_subject || {};
    const subjects = Object.keys(ps).sort();
    const container = document.getElementById('modal-subjects');
    if (!subjects.length) {
      container.innerHTML = '<p style="font-size:0.8rem; color:var(--text-muted); grid-column:1/-1; text-align:center;">No subject data available.</p>';
      return;
    }

    container.innerHTML = subjects.map(subj => {
      const val = ps[subj] || 0;
      const pct = (val * 100).toFixed(1);
      const color = val > 0.1 ? 'var(--green, #16A34A)' : val > 0 ? 'var(--gold, #E69F00)' : 'var(--red, #DC2626)';
      return `<div class="modal__subject-item">
        <div class="subj-val" style="color:${color};">${pct}%</div>
        <div class="subj-name">${subj}</div>
      </div>`;
    }).join('');
  }

  function renderModalTierChart(details) {
    const pt = details.per_tier || {};
    const tiers = Object.keys(pt).sort();
    if (!tiers.length) return;

    const tierLabels = tiers.map(t => t.charAt(0).toUpperCase() + t.slice(1));
    const rates = tiers.map(t => (pt[t] || 0) * 100);
    const tierColors = ['#1E3A8A', '#92400E', '#991B1B', '#065F46', '#5B21B6'];

    const chart = new Chart(document.getElementById('modal-chart-tiers'), {
      type: 'bar',
      data: {
        labels: tierLabels,
        datasets: [{ data: rates, backgroundColor: tierColors.slice(0, tiers.length).map(c => c + 'DD'), borderColor: tierColors.slice(0, tiers.length), borderWidth: 1 }]
      },
      options: {
        indexAxis: 'y',
        responsive: true,
        plugins: { legend: { display: false } },
        scales: {
          x: { beginAtZero: true, max: 100, title: { display: true, text: 'Pass Rate (%)', font: { size: 10 } }, ticks: { font: { size: 9 } } },
          y: { ticks: { font: { size: 10 } } },
        },
      }
    });
    modalCharts.push(chart);
  }

  // ── Analysis Charts ──
  function renderGapChart() {
    const rows = DATA.leaderboard || [];
    if (!rows.length) return;

    const labels = rows.map(r => r.model_name);
    const std = rows.map(r => r.standard_csr * 100);
    const adv = rows.map(r => r.adversarial_csr * 100);

    new Chart(document.getElementById('chart-gap'), {
      type: 'bar',
      data: {
        labels,
        datasets: [
          { label: 'Standard CSR', data: std, backgroundColor: COLORS.blue + 'DD', borderColor: COLORS.blue, borderWidth: 1 },
          { label: 'Adversarial CSR', data: adv, backgroundColor: COLORS.orange + 'DD', borderColor: COLORS.orange, borderWidth: 1 },
        ]
      },
      options: {
        responsive: true,
        plugins: {
          title: { display: true, text: 'Standard vs. Adversarial CSR by Model', font: { family: 'Space Grotesk', size: 14, weight: 700 } },
          legend: { position: 'top', labels: { font: { size: 11 } } },
        },
        scales: {
          y: { beginAtZero: true, max: 100, title: { display: true, text: 'CSR (%)' } },
          x: { ticks: { maxRotation: 45, font: { size: 10 } } },
        },
      }
    });
  }

  function renderStdLevelChart() {
    const perLevel = DATA.per_level || {};
    const models = Object.keys(perLevel);
    if (!models.length) return;

    const datasets = models.slice(0, 7).map((model, i) => {
      const levels = perLevel[model];
      return {
        label: model,
        data: [1,2,3,4,5,6].map(l => ((levels[l] || 0) * 100)),
        borderColor: COLORS.levels[i % 6],
        backgroundColor: COLORS.levels[i % 6] + '44',
        borderWidth: 2,
        tension: 0.3,
        pointRadius: 3,
      };
    });

    new Chart(document.getElementById('chart-levels-std'), {
      type: 'line',
      data: { labels: COLORS.levelNames, datasets: datasets },
      options: {
        responsive: true,
        maintainAspectRatio: true,
        aspectRatio: 1.6,
        plugins: {
          title: { display: true, text: 'Standard Mode: CSR by Bloom\'s Level', font: { family: 'Space Grotesk', size: 13, weight: 700 } },
          legend: { position: 'bottom', labels: { font: { size: 10 }, boxWidth: 12 } },
        },
        scales: {
          y: { beginAtZero: true, max: 100, title: { display: true, text: 'CSR (%)' } },
        },
      }
    });
  }

  function renderAdvLevelChart() {
    const details = DATA.model_details || {};
    const advModels = Object.keys(details).filter(m => details[m].per_level && details[m].per_level.adversarial);
    if (!advModels.length) return;

    const datasets = advModels.slice(0, 7).map((model, i) => {
      const advLevels = details[model].per_level.adversarial;
      return {
        label: model,
        data: [1,2,3,4,5,6].map(l => ((advLevels[String(l)] || 0) * 100)),
        borderColor: COLORS.levels[i % 6],
        backgroundColor: COLORS.levels[i % 6] + '44',
        borderWidth: 2,
        tension: 0.3,
        pointRadius: 3,
      };
    });

    const canvas = document.getElementById('chart-levels-adv');
    if (!canvas) { console.error('chart-levels-adv canvas not found'); return; }

    new Chart(canvas, {
      type: 'line',
      data: { labels: COLORS.levelNames, datasets: datasets },
      options: {
        responsive: true,
        maintainAspectRatio: true,
        aspectRatio: 1.6,
        plugins: {
          title: { display: true, text: 'Adversarial Mode: CSR by Bloom\'s Level', font: { family: 'Space Grotesk', size: 13, weight: 700 } },
          legend: { position: 'bottom', labels: { font: { size: 10 }, boxWidth: 12 } },
        },
        scales: {
          y: { beginAtZero: true, max: 100, title: { display: true, text: 'CSR (%)' } },
        },
      }
    });
  }

  function renderConstraintChart() {
    const breakdown = DATA.constraint_breakdown || {};
    const ids = Object.keys(breakdown);
    if (!ids.length) return;

    const rates = ids.map(id => breakdown[id] * 100);
    const colors = ids.map(id => CONSTRAINT_COLORS[id[0]] || '#94A3B8');

    new Chart(document.getElementById('chart-constraints'), {
      type: 'bar',
      data: {
        labels: ids,
        datasets: [{ data: rates, backgroundColor: colors.map(c => c + 'DD'), borderColor: colors, borderWidth: 1 }]
      },
      options: {
        responsive: true,
        plugins: {
          title: { display: true, text: 'Per-Constraint Pass Rate (Standard Mode, All Models)', font: { family: 'Space Grotesk', size: 13, weight: 700 } },
          legend: { display: false },
        },
        scales: {
          y: { beginAtZero: true, max: 100, title: { display: true, text: 'Pass Rate (%)' } },
          x: { ticks: { font: { size: 9 }, maxRotation: 60 } },
        },
      }
    });
  }

  // ── Animations ──
  function initAnimations() {
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
        }
      });
    }, { threshold: 0.1 });

    document.querySelectorAll('.fade-in').forEach(el => observer.observe(el));
  }

  // ── Nav ──
  function initNav() {
    const nav = document.getElementById('navbar');
    const toggle = document.getElementById('navToggle');
    const links = document.getElementById('navLinks');

    window.addEventListener('scroll', () => {
      nav.classList.toggle('scrolled', window.scrollY > 20);
    });

    if (toggle) {
      toggle.addEventListener('click', () => {
        toggle.classList.toggle('active');
        links.classList.toggle('open');
      });
    }

    links.querySelectorAll('a').forEach(a => {
      a.addEventListener('click', () => {
        toggle.classList.remove('active');
        links.classList.remove('open');
      });
    });
  }

  // ── Init ──
  document.addEventListener('DOMContentLoaded', init);
</script>
</body>
</html>
